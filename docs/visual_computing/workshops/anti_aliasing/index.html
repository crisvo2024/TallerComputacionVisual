<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Taller Rasterización #  En este taller se estudió la técnica denominada anti-aliasing con la cual se busca disminuir la distorción en imágenes de alta resolución al ser presentadas en una resolución inferior.
Anti-aliasing (AA) #  1. Introducción #  Un problema básico al realizar renderización es que si amplía la imagen del triángulo que se ha renderizado entonces se evidencia que los bordes del triángulo no son regulares, es decir, se puede observar pequeños &ldquo;escalones&rdquo; a lo largo del triángulo como se muestra en la siguiente figura."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Taller Rasterización #  En este taller se estudió la técnica denominada anti-aliasing con la cual se busca disminuir la distorción en imágenes de alta resolución al ser presentadas en una resolución inferior.
Anti-aliasing (AA) #  1. Introducción #  Un problema básico al realizar renderización es que si amplía la imagen del triángulo que se ha renderizado entonces se evidencia que los bordes del triángulo no son regulares, es decir, se puede observar pequeños &ldquo;escalones&rdquo; a lo largo del triángulo como se muestra en la siguiente figura."><meta property="og:type" content="article"><meta property="og:url" content="https://visualcomputing.github.io/showcase/docs/visual_computing/workshops/anti_aliasing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-05-27T09:58:51-05:00"><title>Anti Aliasing | Visual Computing</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.86ad3b44265f3d987f565cad4b3af2f03e0e71bf91375b5c381f5bc2296bbab8.js integrity="sha256-hq07RCZfPZh/VlytSzry8D4Ocb+RN1tcOB9bwilrurg=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Visual Computing</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Visual Computing</span><ul><li><a href=/showcase/docs/visual_computing/logs/>Logs</a></li><li><a href=/showcase/docs/visual_computing/profiles/>Profiles</a></li><li><input type=checkbox id=section-29bdbf19413e05c2e701868288e4ab17 class=toggle>
<label for=section-29bdbf19413e05c2e701868288e4ab17 class="flex justify-between"><a href=/showcase/docs/visual_computing/template_examples/>Template Examples</a></label><ul><li><a href=/showcase/docs/visual_computing/template_examples/buttons/>Buttons</a></li><li><a href=/showcase/docs/visual_computing/template_examples/columns/>Columns</a></li><li><a href=/showcase/docs/visual_computing/template_examples/details/>Details</a></li><li><a href=/showcase/docs/visual_computing/template_examples/expand/>Expand</a></li><li><a href=/showcase/docs/visual_computing/template_examples/hints/>Hints</a></li><li><a href=/showcase/docs/visual_computing/template_examples/katex/>Katex</a></li><li><a href=/showcase/docs/visual_computing/template_examples/mermaid/>Mermaid</a></li><li><input type=checkbox id=section-619959e653037cbeb27c2fc2f70843f1 class=toggle>
<label for=section-619959e653037cbeb27c2fc2f70843f1 class="flex justify-between"><a href=/showcase/docs/visual_computing/template_examples/p5/>P5</a></label><ul><li><a href=/showcase/docs/visual_computing/template_examples/p5/div/>Div</a></li><li><a href=/showcase/docs/visual_computing/template_examples/p5/iframe/>Iframe</a></li></ul></li><li><a href=/showcase/docs/visual_computing/template_examples/tabs/>Tabs</a></li></ul></li><li><input type=checkbox id=section-43decbbd35cace6c4f05150232266586 class=toggle checked>
<label for=section-43decbbd35cace6c4f05150232266586 class="flex justify-between"><a href=/showcase/docs/visual_computing/workshops/>Workshops</a></label><ul><li><a href=/showcase/docs/visual_computing/workshops/anti_aliasing/ class=active>Anti Aliasing</a></li><li><a href=/showcase/docs/visual_computing/workshops/illutions/>Illutions</a></li><li><a href=/showcase/docs/visual_computing/workshops/image_processing/>Image Processing</a></li><li><a href=/showcase/docs/visual_computing/workshops/main_spaces/>Main Spaces</a></li><li><a href=/showcase/docs/visual_computing/workshops/procedural_texturing/>Procedural Texturing</a></li></ul></li></ul></li></ul><ul><li><a href=/showcase/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Anti Aliasing</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#taller-rasterización><strong>Taller Rasterización</strong></a></li><li><a href=#anti-aliasing-aa>Anti-aliasing (AA)</a><ul><li><ul><li><a href=#1-introducción><strong>1. Introducción</strong></a></li><li><a href=#2-revisión-bibliográfica><strong>2. Revisión bibliográfica</strong></a></li><li><a href=#3-métodos><strong>3. Métodos</strong></a></li><li><a href=#4-resultados><strong>4. Resultados</strong></a></li><li><a href=#5-discusión><strong>5. Discusión</strong></a></li><li><a href=#6-conclusión><strong>6. Conclusión</strong></a></li><li><a href=#7-referencias><strong>7. Referencias</strong></a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=taller-rasterización><strong>Taller Rasterización</strong>
<a class=anchor href=#taller-rasterizaci%c3%b3n>#</a></h1><p>En este taller se estudió la técnica denominada <strong>anti-aliasing</strong> con la cual se busca disminuir la distorción en imágenes de alta resolución al ser presentadas en una resolución inferior.</p><h1 id=anti-aliasing-aa>Anti-aliasing (AA)
<a class=anchor href=#anti-aliasing-aa>#</a></h1><h3 id=1-introducción><strong>1. Introducción</strong>
<a class=anchor href=#1-introducci%c3%b3n>#</a></h3><p>Un problema básico al realizar renderización es que si amplía la imagen del triángulo que se ha renderizado entonces se evidencia que los bordes del triángulo no son regulares, es decir, se puede observar pequeños &ldquo;escalones&rdquo; a lo largo del triángulo como se muestra en la siguiente figura.</p><p><img src=/showcase/sketches/aliasing.png alt="Aliasing en una imagen renderizada." title="Aliasing (AA)"></p><p>A estos escalones que se mencionan se les conoce usualmente con la palabra <em>jaggies</em>. Estos bordes dentados son básicamente el resultado del hecho de que el triángulo se descompone en píxeles ya que con el proceso de rasterización lo que se hace es descomponer una superficie continua como lo es el triángulo en elementos discretos que vienen siendo los píxeles. La solución propuesta para este problema se denomina anti-aliasing (también denotado <em>AA</em>) que consiste en dividir el píxel en subpíxeles y aplicar la prueba a cada subpíxel para ver si este se esncuentra o no dentro del triángulo. Aunque cada subpíxel no viene siendo más que otro escalón este proceso permite capturar los bordes con más precisión.</p><h3 id=2-revisión-bibliográfica><strong>2. Revisión bibliográfica</strong>
<a class=anchor href=#2-revisi%c3%b3n-bibliogr%c3%a1fica>#</a></h3><p>Retomando la idea propuesta en la sección anterior en la cual se cogían submuestras de cada píxel lo que se hace entonces para <em>&ldquo;suavizar&rdquo;</em> estos bordes es determinar el color final del píxel como la suma del color de todos los subpíxeles dividida por el número total de subpíxeles. A modo de ejemplificar este proceso consideremos un triángulo de color negro con fondo blanco y dividimos cada píxel del triángulo rasterizado en 8 subpíxeles. Al aplicar el anti-aliasing sobre un determinado píxel vemos que solo 5 de sus 8 subpíxeles se encuentrán dentro del triángulo entonces el color final (en RGB) del píxel quedaría:</p><link rel=stylesheet href=/showcase/katex/katex.min.css><script defer src=/showcase/katex/katex.min.js></script>
<script defer src=/showcase/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>
\[\frac{255 + 255 + 255 + 0 + 0 + 0 + 0 + 0}{8} = \frac{765}{8} = 95.625\]</span><p>Este color corresponde a un gris oscuro. De esta manera se deja a un lado una transición <em>&ldquo;binaria&rdquo;</em> entre el borde del triángulo y el fondo para producir una transición más gradual con el fin de disminuir visualmente el efecto de los bordes escalonados.</p><p>Con el propósito de dar un fundamento teórico general del proceso de rasterización y anti-alising se hará una breve explicación de las coordenadas baricéntricas:</p><h4 id=21-coordenadas-baricéntricas><strong>2.1 Coordenadas baricéntricas</strong>
<a class=anchor href=#21-coordenadas-baric%c3%a9ntricas>#</a></h4><p>Un <em><strong>triángulo</strong></em> es un polígono con 3 vértices <em>v0</em>, <em>v1</em>, <em>v2</em> y 3 aristas <em>v0v1</em>, <em>v1v2</em>, <em>v2v0</em>. Un triángulo degenerado es aquel en el que los tres vértices son colineales, es decir, todos caen sobre la misma línea (o incluso pueden ser todos el mismo punto). En 2D un triángulo divide el plano en dos regiones: la interior, que es finita, y la exterior, que no lo es. Ambas están separadas por el límite de los triángulos, que consiste en las tres aristas. Para rasterizar un triángulo, básicamente sólo tenemos que consultar un montón de puntos, que suelen corresponder directamente a la cuadrícula de píxeles o estar dispuestos en algún otro patrón regular, y averiguar si están dentro o no. Además de lo anterior se tiene también que los triángulos son siempre convexos: para dos puntos cualesquiera dentro del triángulo, la línea que los une está también totalmente dentro del triángulo.</p><p><img src=/showcase/sketches/tri1.webp alt="Triángulo con vértices especificados." title=Triángulo></p><p>Consideranto la arista <em>v0v1</em> de la imagen anterior vemos que esta línea divide el plano en dos mitades: un lado <em>&ldquo;izquierdo&rdquo;</em> y un lado <em>&ldquo;derecho&rdquo;</em>. No obstante, si el borde resulta ser horizontal entonces ¿cuál de las dos mitades es la &ldquo;izquierda&rdquo; si están apiladas verticalmente?. Por ello se hace necesario expresarlo todo en relación con la arista y no con la imagen de tal manera que e recorre el triángulo por la arista desde <em>v0</em> hacia <em>v1</em>. Con esto, se refiere a todo lo que está a la izquierda (mirando hacia v1) como el semiespacio <em>&ldquo;positivo&rdquo;</em>, y a todo lo que está a la derecha como el semiespacio <em>&ldquo;negativo&rdquo;</em>. Por último, los puntos que caen sobre la línea no pertenecen a ninguno de los dos semiespacios.</p><p>Ahora bien, se introduce el concepto del <em><strong>determinante</strong></em> de una matriz dados 3 puntos como:</p><span>\[Orient2D(a, b, c) =
\begin{vmatrix}
a_{x} & b_{x} & c_{x}\\
a_{y} & b_{y} & c_{y}\\
1 & 1 & 1
\end{vmatrix} =
\begin{vmatrix}
b_{x} - a_{x} & c_{x} - a_{x} \\
b_{y} - a_{y} & c_{y} - a_{y}
\end{vmatrix}\]</span><p>De esta manera, si esta expresión es positiva, c se encuentra a la izquierda de la arista dirigida <em>ab</em> (es decir, el triángulo <em>abc</em> se enrolla en sentido contrario a las agujas del reloj). Así que, al calcular <em>Orient2D(v0, v1, v2)</em> esto debería indicar si el triángulo está enrollado en sentido contrario a las agujas del reloj (es decir, si <em>v2</em> está a la izquierda de la arista orientada <em>v0v1</em>) o no. La expresión anterior nos dice que debemos calcular el siguiente determinante:</p><span>\[Orient2D(v_{0}, v_{1}, v_{2}) =
\begin{vmatrix}
v_{1x} - v_{0x} & v_{2x} - v_{0x} \\
v_{1y} - v_{0y} & v_{2y} - v_{0y}
\end{vmatrix}\]</span><p>Y esto debería ser igual al <em><strong>área con signo del paralelogramo</strong></em> con aristas <em>v0v1</em> y <em>v0v2</em> como se muestra a continuación:</p><p><img src=/showcase/sketches/tri_area1.webp alt="Paralelogramo formado por 2 vectores." title=Paralelogramo></p><p>Ahora bien, si observamos la imagen tenemos que el paralelogramo tiene el doble de área que el triángulo lo cual nos da la fórmula estándar del determinante para el <em><strong>área del triángulo</strong></em>:</p><span>\[TriArea(v_{0}, v_{1}, v_{2}) = \frac{1}{2}
\begin{vmatrix}
v_{1x} - v_{0x} & v_{2x} - v_{0x} \\
v_{1y} - v_{0y} & v_{2y} - v_{0y}
\end{vmatrix}\]</span><p>Ahora, para averiguar en qué lado de una arista se encuentra un punto vamos a elegir un punto arbitrario <em>p</em> y ver cómo se relaciona con la arista <em>v0v1</em> de tal manera que la expresión del determinante quedaría:</p><span>\[\begin{vmatrix}
v_{1x} - v_{0x} & p_{x} - v_{0x} \\
v_{1y} - v_{0y} & p_{y} - v_{0y}
\end{vmatrix} = (v_{1x} - v_{0x})(p_{y} - v_{0y}) - (v_{1y} - v_{0y})(p_{x} - v_{0x})\]</span><p>Y reordenando términos tenemos:</p><span>\[F_{01}(p) = (v_{0y} - v_{1y})p_{x} + (v_{1x} - v_{0x})p_{y} + (v_{0x}v_{1y} - v_{0y}v_{1x})\\
F_{12}(p) = (v_{1y} - v_{2y})p_{x} + (v_{2x} - v_{1x})p_{y} + (v_{1x}v_{2y} - v_{1y}v_{2x})\\
F_{20}(p) = (v_{2y} - v_{0y})p_{x} + (v_{0x} - v_{2x})p_{y} + (v_{2x}v_{0y} - v_{2y}v_{0x})\]</span><p>A estas funciones se les denomina <em><strong>función de borde</strong></em> (o <em>edge function</em> en inglés) para los borded <em>v0v1</em>, <em>v1v2</em> y <em>v2v0</em> respectivamente, y de esta manera si las tres son positivas, <em>p</em> está dentro del triángulo, suponiendo que el triángulo está enrollado en sentido contrario a las agujas del reloj.</p><p>Y es este hecho con el cual se trabaja para realizar la rasterización de una imagen y por consiguiente también se usa para el proceso de anti-aliasing.</p><h3 id=3-métodos><strong>3. Métodos</strong>
<a class=anchor href=#3-m%c3%a9todos>#</a></h3><p>Para llevar a cabo este ejercicio se llevó a cabo en primer lugar una revisión teórica de cada uno de los conceptos que envuelven la temática del proceso de anti-aliasing (AA) en la rasterización de imágenes. De esta manera se investigaron distintas fuentes de información debidamente citadas de las cuales se extrajeron ideas generales acerca de conceptos clave como la fundamentación teórica de las coordenas baricéntricas y el proceso de anti-aliasing aplicado en imágenes.</p><p>Finalmente se desarrolló un programa a partir de un ejemplo de rasterización de un triángulo desarrollado por el profesor <em><strong>Jean Pierre Charalambos Hernandez</strong></em> (vease los recursos citados para ver el ejemplo original) de tal manera que fue modificado y adaptado para poder aplicar anti-aliasing sobre un triángulo ya rasterizado.</p><h3 id=4-resultados><strong>4. Resultados</strong>
<a class=anchor href=#4-resultados>#</a></h3><p>A partir del estudio llevado a cabo se realizó el siguiente programa con el fin de visualizar el efecto del anti-aliasing sobre un triángulo rasterizado.</p><details><summary>p5 - anti-aliasing code</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>{{<span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>p5</span><span style=color:#f92672>-</span><span style=color:#a6e22e>global</span><span style=color:#f92672>-</span><span style=color:#a6e22e>iframe</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;breath&#34;</span> <span style=color:#a6e22e>width</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;625&#34;</span> <span style=color:#a6e22e>height</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;625&#34;</span> <span style=color:#f92672>&gt;</span>}}
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ROWS</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>COLS</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>LENGTH</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>quadrille</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>row0</span>, <span style=color:#a6e22e>col0</span>, <span style=color:#a6e22e>row1</span>, <span style=color:#a6e22e>col1</span>, <span style=color:#a6e22e>row2</span>, <span style=color:#a6e22e>col2</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>original_quadrille</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createCanvas</span>(<span style=color:#a6e22e>COLS</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>LENGTH</span>, <span style=color:#a6e22e>ROWS</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>LENGTH</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>quadrille</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createQuadrille</span>(<span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>200</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>quadrille</span>.<span style=color:#a6e22e>colorize</span>(<span style=color:#e6db74>&#39;red&#39;</span>, <span style=color:#e6db74>&#39;green&#39;</span>, <span style=color:#e6db74>&#39;blue&#39;</span>, <span style=color:#e6db74>&#39;cyan&#39;</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background</span>(<span style=color:#e6db74>&#39;#f7f5f5&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>drawQuadrille</span>(<span style=color:#a6e22e>quadrille</span>, { <span style=color:#a6e22e>cellLength</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>LENGTH</span>, <span style=color:#a6e22e>outline</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;black&#39;</span>, <span style=color:#a6e22e>board</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span> });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>keyPressed</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>key</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;r&#39;</span>) { <span style=color:#75715e>// Rasterize the triangle
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>randomize</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>quadrille</span>.<span style=color:#a6e22e>clear</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>quadrille</span>.<span style=color:#a6e22e>rasterizeTriangle</span>(<span style=color:#a6e22e>row0</span>, <span style=color:#a6e22e>col0</span>, <span style=color:#a6e22e>row1</span>, <span style=color:#a6e22e>col1</span>, <span style=color:#a6e22e>row2</span>, <span style=color:#a6e22e>col2</span>, <span style=color:#a6e22e>colorize_shader</span>, [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>original_quadrille</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>quadrille</span>.<span style=color:#a6e22e>memory2D</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>key</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;a&#39;</span>) { <span style=color:#75715e>// Apply anti-aliasing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>applyAA</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>key</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;s&#39;</span>) { <span style=color:#75715e>// Remove anti-aliasing
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>quadrille</span>.<span style=color:#a6e22e>memory2D</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>original_quadrille</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>colorize_shader</span>({ <span style=color:#a6e22e>pattern</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>mixin</span> }) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rgb</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>mixin</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>rgb</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>randomize</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>col0</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>COLS</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>row0</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>ROWS</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>col1</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>COLS</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>row1</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>ROWS</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>col2</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>COLS</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>row2</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>ROWS</span>));
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>applyAA</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grid</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>quadrille</span>.<span style=color:#a6e22e>memory2D</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>ROWS</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>COLS</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grid</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>sum</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>k</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>k</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>k</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>0.0625</span>){
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>t</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>j</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>t</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>t</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>0.0625</span>){ <span style=color:#75715e>// Pixel division: 1024 subpixels
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>coords</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>barycentric_coords</span>(<span style=color:#a6e22e>k</span>, <span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>row0</span>, <span style=color:#a6e22e>col0</span>, <span style=color:#a6e22e>row1</span>, <span style=color:#a6e22e>col1</span>, <span style=color:#a6e22e>row2</span>, <span style=color:#a6e22e>col2</span>);
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>(<span style=color:#a6e22e>coords</span>.<span style=color:#a6e22e>w0</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>coords</span>.<span style=color:#a6e22e>w1</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>coords</span>.<span style=color:#a6e22e>w2</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span>)) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>sum</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>            } 
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>grid</span>[<span style=color:#a6e22e>i</span>][<span style=color:#a6e22e>j</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>((<span style=color:#a6e22e>sum</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>255</span>)<span style=color:#f92672>/</span><span style=color:#ae81ff>256</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>quadrille</span>.<span style=color:#a6e22e>memory2D</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>grid</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>barycentric_coords</span>(<span style=color:#a6e22e>row</span>, <span style=color:#a6e22e>col</span>, <span style=color:#a6e22e>row0</span>, <span style=color:#a6e22e>col0</span>, <span style=color:#a6e22e>row1</span>, <span style=color:#a6e22e>col1</span>, <span style=color:#a6e22e>row2</span>, <span style=color:#a6e22e>col2</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>edges</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>edge_functions</span>(<span style=color:#a6e22e>row</span>, <span style=color:#a6e22e>col</span>, <span style=color:#a6e22e>row0</span>, <span style=color:#a6e22e>col0</span>, <span style=color:#a6e22e>row1</span>, <span style=color:#a6e22e>col1</span>, <span style=color:#a6e22e>row2</span>, <span style=color:#a6e22e>col2</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>area</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>parallelogram_area</span>(<span style=color:#a6e22e>row0</span>, <span style=color:#a6e22e>col0</span>, <span style=color:#a6e22e>row1</span>, <span style=color:#a6e22e>col1</span>, <span style=color:#a6e22e>row2</span>, <span style=color:#a6e22e>col2</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>w0</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>edges</span>.<span style=color:#a6e22e>e12</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>area</span>, <span style=color:#a6e22e>w1</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>edges</span>.<span style=color:#a6e22e>e20</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>area</span>, <span style=color:#a6e22e>w2</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>edges</span>.<span style=color:#a6e22e>e01</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>area</span> };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>parallelogram_area</span>(<span style=color:#a6e22e>row0</span>, <span style=color:#a6e22e>col0</span>, <span style=color:#a6e22e>row1</span>, <span style=color:#a6e22e>col1</span>, <span style=color:#a6e22e>row2</span>, <span style=color:#a6e22e>col2</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>col1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>col0</span>) <span style=color:#f92672>*</span> (<span style=color:#a6e22e>row2</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>row0</span>) <span style=color:#f92672>-</span> (<span style=color:#a6e22e>col2</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>col0</span>) <span style=color:#f92672>*</span> (<span style=color:#a6e22e>row1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>row0</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>edge_functions</span>(<span style=color:#a6e22e>row</span>, <span style=color:#a6e22e>col</span>, <span style=color:#a6e22e>row0</span>, <span style=color:#a6e22e>col0</span>, <span style=color:#a6e22e>row1</span>, <span style=color:#a6e22e>col1</span>, <span style=color:#a6e22e>row2</span>, <span style=color:#a6e22e>col2</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>e01</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>row0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>row1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>col1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>col0</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>col0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>row1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>row0</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>col1</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>e12</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>row1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>row2</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>col2</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>col1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>col1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>row2</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>row1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>col2</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>e20</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>row2</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>row0</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>col</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>col0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>col2</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>row</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>col2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>row0</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>row2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>col0</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>e01</span>, <span style=color:#a6e22e>e12</span>, <span style=color:#a6e22e>e20</span> };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>{{<span style=color:#f92672>&lt;</span> <span style=color:#960050;background-color:#1e0010>/p5-global-iframe &gt;}}</span>
</span></span></code></pre></div></div></details><iframe id=AA style=width:525px;height:525px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=/showcase/scripts/p5.min.js></script>
            <script src=/showcase/scripts/p5.sound.min.js></script>
             <script src=/showcase/scripts/p5.quadrille.js></script> 
            
            
            
            
            <script>
              
  const ROWS = 100;
  const COLS = 100;
  const LENGTH = 5;
  let quadrille;
  let row0, col0, row1, col1, row2, col2;
  let original_quadrille;

  function setup() {
    createCanvas(COLS * LENGTH, ROWS * LENGTH);
    quadrille = createQuadrille(200, 200);
    quadrille.colorize('red', 'green', 'blue', 'cyan');
  }

  function draw() {
    background('#f7f5f5');
    drawQuadrille(quadrille, { cellLength: LENGTH, outline: 'black', board: true });
  }

  function keyPressed() {
    if (key === 'r') { // Rasterize the triangle
      randomize();
      quadrille.clear();
      quadrille.rasterizeTriangle(row0, col0, row1, col1, row2, col2, colorize_shader, [0, 0, 0, 0, 0], [0, 0, 0, 0, 0], [0, 0, 0, 0, 0]);
      original_quadrille = quadrille.memory2D;
    }

    if (key === 'a') { // Apply anti-aliasing
      applyAA();
    }

    if (key === 's') { // Remove anti-aliasing
      quadrille.memory2D = original_quadrille;
    }

  }

  function colorize_shader({ pattern: mixin }) {
    let rgb = mixin.slice(0, 3);
    return color(rgb);
  }

  function randomize() {
    col0 = int(random(0, COLS));
    row0 = int(random(0, ROWS));
    col1 = int(random(0, COLS));
    row1 = int(random(0, ROWS));
    col2 = int(random(0, COLS));
    row2 = int(random(0, ROWS));
  }

  function applyAA() {
    grid = quadrille.memory2D;

    for (let i = 0; i < ROWS; i++) {
      for (let j = 0; j < COLS; j++) {
        if (grid[i][j] != 0) {
          sum = 0;
          for (let k = i-1; k < i + 1; k += 0.0625){
            for (let t = j-1; t < j + 1; t += 0.0625){ // Pixel division: 1024 subpixels
              let coords = barycentric_coords(k, t, row0, col0, row1, col1, row2, col2);
              if (!(coords.w0 >= 0 && coords.w1 >= 0 && coords.w2 >= 0)) {
                sum += 1;
              }
            } 
          }
          grid[i][j] = color((sum * 255)/256);
        }
      }
    }

    quadrille.memory2D = grid;
  }

  function barycentric_coords(row, col, row0, col0, row1, col1, row2, col2) {
    let edges = edge_functions(row, col, row0, col0, row1, col1, row2, col2);
    let area = parallelogram_area(row0, col0, row1, col1, row2, col2);
    return { w0: edges.e12 / area, w1: edges.e20 / area, w2: edges.e01 / area };
  }

  function parallelogram_area(row0, col0, row1, col1, row2, col2) {
    return (col1 - col0) * (row2 - row0) - (col2 - col0) * (row1 - row0);
  }

  function edge_functions(row, col, row0, col0, row1, col1, row2, col2) {
    let e01 = (row0 - row1) * col + (col1 - col0) * row + (col0 * row1 - row0 * col1);
    let e12 = (row1 - row2) * col + (col2 - col1) * row + (col1 * row2 - row1 * col2);
    let e20 = (row2 - row0) * col + (col0 - col2) * row + (col2 * row0 - row2 * col0);
    return { e01, e12, e20 };
  }

            </script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=5-discusión><strong>5. Discusión</strong>
<a class=anchor href=#5-discusi%c3%b3n>#</a></h3><p>Partiendo de los resultados obtenidos tenemos que se puede evidenciar un <em>suavizado</em> en los bordes de cada triángulo generado dependiendo de qué fracción de los píxeles de los bordes estén por dentro y qué fracción estén por fuera. Por otra parte, y partiendo del hecho de que se realizó una subdivisión de cada píxel en 256 subpíxeles se evidencia que el proceso de rasterización que se lleva a cabo para determinar el promedio del color del píxel se hace de manera rápida debido a que el cálculo de las funciones de borde para cada subpíxel no significa una carga computacional grande.</p><h3 id=6-conclusión><strong>6. Conclusión</strong>
<a class=anchor href=#6-conclusi%c3%b3n>#</a></h3><ol><li>El anti-aliasing es un proceso de mucha utilidad y aplicabilidad por ejemplo en el contexto de los videojuegos ya que provee de un algorítmo eficiente con el cual dar un efecto de suavizado de las figuras y de esta manera el usuario puede tener una visualización de los gráficos mucho más agradable.</li></ol><p><img src=/showcase/sketches/anti-aliasing-effect-.jpg alt="Efecto del antialiasing." title="Efecto AA"></p><ol start=2><li></li></ol><h3 id=7-referencias><strong>7. Referencias</strong>
<a class=anchor href=#7-referencias>#</a></h3><ul><li><a href=https://www.scratchapixel.com/lessons/3d-basic-rendering/rasterization-practical-implementation/rasterization-practical-implementation>Rasterization: a Practical Implementation</a></li><li><a href=https://fgiesen.wordpress.com/2013/02/06/the-barycentric-conspirac/n>The barycentric conspiracy</a></li><li><a href=https://en.wikipedia.org/wiki/Spatial_anti-aliasing>Spatial anti-aliasing</a></li><li><a href="https://helpx.adobe.com/photoshop-elements/key-concepts/aliasing-anti-aliasing.html#:~:text=Anti-aliasing%20is%20the%20smoothing,make%20the%20edges%20appear%20smoother.">Aliasing & Anti-aliasing</a></li><li><a href=https://github.com/objetos/p5.quadrille.js/blob/main/examples/raster/sketch.js>Raster in p5.quadrille.js</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/bfbea94d0d23e2d35a1c0f61e318d22bf4d9d906 title="Last modified by Juan Esteban Rozo Urbina | May 27, 2022" target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>May 27, 2022</span></a></div></div><script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#taller-rasterización><strong>Taller Rasterización</strong></a></li><li><a href=#anti-aliasing-aa>Anti-aliasing (AA)</a><ul><li><ul><li><a href=#1-introducción><strong>1. Introducción</strong></a></li><li><a href=#2-revisión-bibliográfica><strong>2. Revisión bibliográfica</strong></a></li><li><a href=#3-métodos><strong>3. Métodos</strong></a></li><li><a href=#4-resultados><strong>4. Resultados</strong></a></li><li><a href=#5-discusión><strong>5. Discusión</strong></a></li><li><a href=#6-conclusión><strong>6. Conclusión</strong></a></li><li><a href=#7-referencias><strong>7. Referencias</strong></a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>